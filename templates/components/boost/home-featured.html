<div class="carousel-controls">
</div>

<div class="carousel-container">
    <section class="heroCarousel"
        data-slick='{
            "arrows": {{arrows}},
            "slidesToShow": 1,
            "slidesToScroll": 1,
            "autoplay": true,
            "autoplaySpeed": {{carousel.swap_frequency}},
            "lazyLoad": "anticipated",
            "infinite": true
        }'>
        {{#each carousel.slides}}
        <a href="{{url}}">
            <div class="heroCarousel-slide {{#if ../theme_settings.homepage_stretch_carousel_images}}stretch{{/if}} {{#if @first}}heroCarousel-slide--first{{/if}}">
                <div class="heroCarousel-image-wrapper">
                    {{#if @first}}
                        <picture>
                            <source media="(min-width: 1261px)" srcset="/product_images/uploaded_images/{{first (split (first (split (last (split (stripQuerystring image) "/")) ".")) "_")}}-l.jpg">
                            <source media="(min-width: 801px)" srcset="/product_images/uploaded_images/{{first (split (first (split (last (split (stripQuerystring image) "/")) ".")) "_")}}-m.jpg">
                            <img src="/product_images/uploaded_images/{{first (split (first (split (last (split (stripQuerystring image) "/")) ".")) "_")}}-s.jpg" class="heroCarousel-image">
                        </picture> 
                    {{else}}
                        <picture>
                            <source media="(min-width: 1261px)" srcset="/product_images/uploaded_images/{{first (split (first (split (last (split (stripQuerystring image) "/")) ".")) "_")}}-l.jpg">
                            <source media="(min-width: 801px)" srcset="/product_images/uploaded_images/{{first (split (first (split (last (split (stripQuerystring image) "/")) ".")) "_")}}-m.jpg">
                            <img src="/product_images/uploaded_images/{{first (split (first (split (last (split (stripQuerystring image) "/")) ".")) "_")}}-s.jpg" class="heroCarousel-image" loading="lazy">
                        </picture> 
                    {{/if}}
                    <div class="heroCarousel-image-overlay"></div>
                </div>
                {{#if heading}}
                    {{> components/carousel-content show_background=true}}
                {{else}}
                    {{#if text}}
                        {{> components/carousel-content show_background=true}}
                    {{else}}
                        {{#if button_text}}
                            {{> components/carousel-content show_background=false}}
                        {{/if}}
                    {{/if}}
                {{/if}}
            </div>
        </a>
        {{/each}}
    </section>
</div>
